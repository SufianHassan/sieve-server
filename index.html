<html>
  <head>
    <title>Sieve</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  </head>
  <body>
    
      <div class="container">
          <hr />
          <div class="alert alert-info"><b>Try it!</b>  Open up your DevTools console to get started.</div>
          <hr />
          {{docs}}
      </div>
  </body>
  <script type="text/javascript">

if (typeof(console) !== "undefined"){

}

var tutorial = [
    [
        "    _____              ",
        "  / __(_)__ _  _____   ",
        " _\\ \\/ / -_) |/ / -_)",
        "/___/_/\\__/|___/\\__/ ",
        "                       ",
        "Welcome to the Sieve tutorial!",
        "",
        "To get you started, we've already set up a few variables:",
        "",
        "    server",
        "    post",
        "",
        "To continue, type \"more()\""
    ],
    [
        "Sieve requests begin as JSON objects with the following layout:",
        "",
        "    var request = {",
        "        \"url\" : \"https://api.github.com/repos/alexose/sieve/commits\",",
        "        \"selector\" : \".commit .date\"",
        "    };",
        "",
        "(We've set this up one for you as well.  No need to copy and paste.)",
        "",
        "Let's POST this request to the server using our predefined post function.  Try typing the following:",
        "",
        "    post(server, request);",
        "",
        "Note that you can always return to the previous step by typing \"last()\"!"
    ]
];

var server = 'http://alexose.com:3008';

var post = function(server, request){
    $.post(server, request)
        .success(function(response){
            console.log(response);
        })
        .error(function(response){
            console.log('%c' + response, 'color: red');
        });

    return "POSTing to server...";
};

var pos = 0;

var request = { "url" : "https://api.github.com/repos/alexose/sieve/commits", "selector" : ".commit .date" };

var more = function(){
    var text = tutorial[pos].map(function(d){ return d + "\n"; });

    if (pos){
        text.unshift('\n Step ' + pos + ' of ' + (tutorial.length - 1) + ':\n\n');
    }

    console.log.apply(console, text);
    pos++;

    return '';
}
more();

  </script>
</html>

